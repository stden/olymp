% Author: Ivan Kazmenko (Claudio Baiocchi)
% Text: Ivan Kazmenko
% Link: http://recmath.org/PolyCur/nbaiocchi/index.html
\begin{problem}{Фигуры Байоччи}
{\textit{нет}}{baiocchi.out}
{ \textit{пять часов}}{ \textit{вся доступная память компьютера}}

\textit {Полиомино} --- это клеточная фигура на плоскости, связная
по стороне. Иными словами, полиомино состоит из клеток, причём между
любыми двумя его клетками существует путь, проходящий по его клеткам,
и соседние клетки в пути имеют общую сторону.

Два полиомино считаются различными, если одно из них нельзя перевести
в другое некоторой последовательностью поворотов, сдвигов и отражений.

Например, существует всего пять различных тетрамино --- полиомино из
четырёх клеток:

\begin {center} \includegraphics [scale=0.5] {pics/baiocchi.1} \end {center}

Полиомино можно поворачивать на угол, кратный 90\textdegree, а также
сдвигать и отражать относительно горизонтальной, вертикальной
или диагональной прямой (то есть любой прямой, образующей с горизонтальной
прямой угол, кратный 45\textdegree). Например, L-тетрамино может быть
повёрнуто и/или отражено следующими способами:

\begin {center} \includegraphics [scale=0.5] {pics/baiocchi.2} \end {center}

\textit {Фигура Байоччи} --- это непустая клеточная фигура на плоскости,
связная по стороне,
составленная из одинаковых полиомино и симметричная относительно
всех прямых, проходящих через её центр и образующих с горизонтальной
прямой угол, кратный 45\textdegree~(таким образом, у фигуры Байоччи есть
четыре линии симметрии).

На рисунке слева показан пример фигуры Байоччи для N-тетрамино
(заметим, что разрезание фигуры на полиомино не обязано быть симметричным).
Средняя фигура, составленная из T-тетрамино, не является фигурой Байоччи,
так как не связна по стороне. Правая фигура, состоящая из L-тетрамино,
также не является фигурой Байоччи, потому что не симметрична
относительно диагоналей.

\begin {center}
\begin {tabular} {c c c}
 \includegraphics [scale=0.5] {pics/baiocchi.3} ~ &
 ~ \includegraphics [scale=0.5] {pics/baiocchi.4} ~ &
 ~ \includegraphics [scale=0.5] {pics/baiocchi.5}
\end {tabular}
\end {center}

Для каждого полиомино, состоящего из одной, двух, \ldots, восьми клеток,
найдите фигуру Байоччи, составленную из как можно меньшего числа
таких полиомино.

\OutputFile

Решением задачи считается выходной файл под названием
`\t{baiocchi.out}', запакованный архиватором gzip и утилитой tar
(команда `\t{tar -czf archive.tar.gz *.out}' создаёт gzip-архив
`\t{archive.tar.gz}', содержащий все файлы,
подходящие под шаблон `\t{*.out}').
Архив не должен содержать никаких других файлов и папок.

Выходной файл должен содержать не более одной фигуры Байоччи для каждого
из различных полиомино, состоящих из $1 \le n \le 8$ клеток. Всего таких
полиомино насчитывается $533$, однако жюри не гарантирует существование
фигуры Байоччи для каждого из них.

Каждая фигура Байоччи в выходном файле должна состоять из положительного,
но не превосходящего $200$, числа строк. Каждая строка в этой записи должна
содержать одинаковое положительное, но также не превосходящее $200$,
количество символов. В клетках, где находятся полиомино, должны стоять
заглавные буквы латинского алфавита (`\t{A}'\t{--}`\t{Z}'), причём
принадлежащими одному полиомино считаются максимальные наборы клеток
с одинаковой буквой, образующие фигуру, связную по стороне. Допускается
обозначение различных вхождений полиомино одной и той же буквой, если они
не являются связными по стороне. В свободных клетках должен стоять символ
`\t{.}' (точка). Центром фигуры Байоччи должен быть центр её текстовой
записи, выведенной участником.

Соседние фигуры Байоччи в выходном файле должны быть разделены одной
пустой строкой. Допускается также наличие пустой строки в конце файла.
Фигуры можно выводить в любом порядке.

При отсылке производится проверка на соответствие файла в архиве
формату вывода, и результат сообщается участнику. В зачёт идёт последнее
решение, в ответ на которое участник получил сообщение `\t{Accepted}'.
Решения, в ответ на которые получено `\t{Presentation Error}', игнорируются.
%Независимо от этого результата, оценка решения участника производится
%по последнему посланному архиву с ответами.

Если в ответе участника содержится более одной фигуры Байоччи для какого-то
полиомино, или по какой-то фигуре невозможно однозначно восстановить,
из какого полиомино она состоит,
или какое-то полиомино состоит из более чем восьми клеток,
участнику выдаётся ошибка `\t{Presentation Error}'. В остальных случаях
результат проверки сообщается участнику только после конца тура.

\Scoring

Оценка за решение --- это сумма оценок за каждое полиомино, округлённая до
ближайшего целого числа. Оценка за каждое полиомино вычисляется следующим
образом. Пусть $K$ --- количество полиомино, для которых жюри или участниками
найдена хотя бы одна фигура Байоччи. Тогда каждому из них соответствует
одинаковое максимальное количество баллов $S = 300 / K$, которое можно
за него получить.
Если для какого-то полиомино ответ не найден или некорректен (то есть
клеточная фигура, составленная участником, не является фигурой Байоччи),
оценка равна нулю.
В противном случае оценка --- это $S \cdot 2^{\frac {M - C} {4}}$,
где $C$ --- это количество полиомино в фигуре Байоччи, выведенной участником,
а $M$ --- это минимальное изо всех таких количеств, полученных всеми
участниками и жюри за всю олимпиаду для этого полиомино.
Таким образом, если $C = M$, участник получает $S$ баллов за этот тест,
если $C = M + 2$, то всего лишь $\frac {S} {\sqrt {2}}$ баллов,
и так далее.

Максимальное количество баллов, которое можно получить за эту задачу,
равно $300$.

\Example

\ttfamily\obeylines\obeyspaces\frenchspacing%
\begin{tabular}{|c|}%
\hline%
baiocchi.out\cr%
\hline%
\begin{minipage}[t]{\exmpwidewid}\rightskip=0pt plus 1fill\relax%
......
.AAAB.
.B..B.
.B..B.
.BAAA.
......
~
AA
BB
~
..BCC..
.ABBCC.
AA.B.DD
AHH.DDE
HH.F.EE
.GGFFE.
..GGF..
\medskip\end{minipage}\cr%
\hline%
\end{tabular}%

\end{problem}
